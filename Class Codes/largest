LXI H, 4000H

MOV B, M
INX H
MOV A, M
DCR B

NEXT: INX H
CMP M
JNC LOOP
MOV A, M

LOOP: DCR B
JNZ NEXT
STA 5000H
HLT